
<div class="game">
  <jukebox :playlist="playlist" ref="jukebox" v-on:track-finished="trackFinished"></jukebox>

  <toolbar>
    <span slot="topbar">
      <md-button class="md-icon-button" v-if="userIsGameMaster" @click="openMenu('crawl')"><icon name="crawl"></icon></md-button>
      <md-button class="md-icon-button" v-if="userIsGameMaster" @click="openMenu('players')"><icon name="rebel"></icon></md-button>
      <md-button class="md-icon-button" v-if="userIsGameMaster" @click="openMenu('settings')"><icon name="empire"></icon></md-button>
    </span>
  </toolbar>

  <party :game="game"></party>

  <div class="panel main-window">
    <div class="row">
      <div class="column">
        <h1 class="section-header">{{ game.title }}</h1>
        <alert ref="gameAlert" :can-close="true"></alert>
      </div>
    </div>
  </div>

  <star-wars-crawl
    :title="activeCrawl.title"
    :subtitle="activeCrawl.subtitle"
    :body="activeCrawl.crawl"
    :image="activeCrawl.image"
    v-on:play-music="playMusic"
    v-on:stop-music="stopMusic"
    ref="crawl">
  </star-wars-crawl>

  <md-dialog ref="crawlDialog" v-if="userIsGameMaster">
    <md-dialog-title>
      <p>{{ game.title }} Crawls</p>
      <p class="subtitle"><small>Customizable introductory Star Wars crawl animations. Can be sent to the game's chat window or shared with players.</small></p>
    </md-dialog-title>
    <md-dialog-content>
      <component is="crawlMenu" :game="game" v-on:close="closeMenu('crawl')" v-on:play-crawl="playCrawl"></component>
    </md-dialog-content>
  </md-dialog>

  <md-dialog ref="playersDialog" v-if="userIsGameMaster">
    <md-dialog-title>
      <p>{{ game.title }} Players</p>
      <p class="subtitle"><small>Add, approve, or remove players from the game.</small></p>
    </md-dialog-title>
    <md-dialog-content>
      <component is="playersMenu" :game="game" v-on:close="closeMenu('players')"></component>
    </md-dialog-content>
  </md-dialog>

  <md-dialog ref="settingsDialog" v-if="userIsGameMaster">
    <md-dialog-title>
      <p>{{ game.title }} Settings</p>
      <p class="subtitle"><small>Game specific settings and configuration.</small></p>
    </md-dialog-title>
    <md-dialog-content>
      <component is="settingsMenu" :game="game" v-on:close="closeMenu('settings')"></component>
    </md-dialog-content>
  </md-dialog>
</div>
